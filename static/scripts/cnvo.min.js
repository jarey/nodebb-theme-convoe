"use strict";$(document).ready(function(global){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function Debouncer(callback){this.callback=callback;this.ticking=false;}
Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback();this.ticking=false;},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.update.bind(this));this.ticking=true;}},handleEvent:function(){this.requestTick();}};function Headroom(elem,options){options=options||Headroom.options;this.lastKnownScrollY=0;this.elem=elem;this.debouncer=new Debouncer(this.update.bind(this));this.tolerance=options.tolerance;this.classes=options.classes;this.offset=options.offset;this.initialised=false;}
Headroom.prototype={constructor:Headroom,init:function(){this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);},destroy:function(){this.initialised=false;window.removeEventListener('scroll',this.debouncer,false);this.elem.classList.remove(this.classes.unpinned,this.classes.pinned,this.classes.initial);},attachEvent:function(){if(!this.initialised){this.initialised=true;window.addEventListener('scroll',this.debouncer,false);}},unpin:function(){this.elem.classList.add(this.classes.unpinned);this.elem.classList.remove(this.classes.pinned);},pin:function(){this.elem.classList.remove(this.classes.unpinned);this.elem.classList.add(this.classes.pinned);},getScrollY:function(){return(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;},update:function(){var currentScrollY=this.getScrollY(),toleranceExceeded=Math.abs(currentScrollY-this.lastKnownScrollY)>=this.tolerance;if(currentScrollY<0){return;}
if(toleranceExceeded){if(currentScrollY>this.lastKnownScrollY&&currentScrollY>=this.offset){this.unpin();}
else if(currentScrollY<this.lastKnownScrollY){this.pin();}}
this.lastKnownScrollY=currentScrollY;}};Headroom.options={tolerance:0,offset:0,classes:{pinned:'headroom--pinned',unpinned:'headroom--unpinned',initial:'headroom'}};global.Headroom=Headroom;}(this));$(document).ready(function($){$.fn.headroom=function(option){return this.each(function(){var $this=$(this),data=$this.data('headroom'),options=typeof option==='object'&&option;options=$.extend(true,{},Headroom.options,options);if(!data){data=new Headroom(this,options);data.init();$this.data('headroom',data);}
if(typeof option==='string'){data[option]();}});};$('[data-headroom]').each(function(){var $this=$(this);$this.headroom($this.data());});}(window.Zepto||window.jQuery));$(document).ready(function(){$("header").headroom({"tolerance":5,"offset":205,"classes":{"initial":"animated","pinned":"slideDown","unpinned":"slideUp"}});});

(function($){"use strict";var DEFAULT_OPTIONS={selector:'',dataattr:'img',background:false,each:null,eacherror:null,callback:null,timeout:10000,};var init=function(_i,self,opts){var q=Queue.getInstance();var $this=$(self);var defaults=$.extend({},DEFAULT_OPTIONS,opts||{});var ns='_'+(''+(new Date()).valueOf()).slice(-7);var $elms;var len=0;if(defaults.selector===''&&$this.data(defaults.dataattr)){$elms=$this;len=1;}
else{$elms=$this.find([defaults.selector,'[data-',defaults.dataattr,']'].join(''));len=$elms.length;}
$this.data(ns,{each:defaults.each,eacherror:defaults.eacherror,callback:defaults.callback,isLoading:true,loadedImageCounter:0,length:len});if(len===0){finishImageLoad(self,ns);}
else{$elms.each(function(i,elm){q.add(buildImageLoadFunc(elm,self,ns,defaults.background,defaults.dataattr,defaults.timeout));});$this.on('loadImage.'+ns,onLoadImage);q.run();}
return self;};var onLoadImage=function(ev,elm,img,isError){var parent=ev.currentTarget;var defaults=$(parent).data(ev.namespace);if(!defaults.isLoading){return;}
if(isError){if(typeof defaults.eacherror==='function'){defaults.eacherror(elm);}
else{if(elm.parentNode!==null){elm.parentNode.removeChild(elm);}}}
else if(typeof defaults.each==='function'){defaults.each(elm,img);}
++defaults.loadedImageCounter;if(defaults.loadedImageCounter>=defaults.length){finishImageLoad(parent,ev.namespace);}};var finishImageLoad=function(parent,ns){var $parent=$(parent);var data=$parent.data();var callback=data[ns].callback;$parent.off('loadImage.'+ns,onLoadImage);delete data[ns];if(typeof callback==='function'){setTimeout(function(){callback(parent);},$.imageloader.queueInterval*2);}};var buildImageLoadFunc=function(elm,parent,namespace,isBg,attr,milsec_timeout){var $elm=$(elm);var src=$elm.data(attr);var hasFinished=false;var onFinishLoagImage=function(ev,img){$elm.removeAttr(['data-',attr].join(''));$(parent).triggerHandler('loadImage.'+namespace,[elm,img,(ev&&ev.type==='error')]);};return function(){var timer_handler;var $img=$('<img />');$img.bind('error',function(ev){hasFinished=true;clearTimeout(timer_handler);$(this).unbind('error').unbind('load');onFinishLoagImage(ev);}).bind('load',function(ev){hasFinished=true;clearTimeout(timer_handler);$(this).unbind('error').unbind('load');if(isBg){$elm.css('background-image',['url(',src,')'].join(''));}
else{$elm.attr('src',src);}
onFinishLoagImage(ev,$img[0]);}).attr('src',src);timer_handler=setTimeout(function(){if(hasFinished===false){$img.trigger('error');}},milsec_timeout);};};var _queue_instance_;var Queue={getInstance:function(){if(_queue_instance_ instanceof QueueImpl===false){_queue_instance_=new QueueImpl();}
return _queue_instance_;}};var QueueImpl=function(){this.index=0;this.queue=[];this.isRunning=false;};QueueImpl.prototype.add=function(func){if(typeof func!=='function'){throw new Error('you can only pass function.');}
this.queue.push(func);};QueueImpl.prototype.run=function(firenow){var run=$.proxy(this.run,this);firenow=firenow||false;if(this.isRunning&&!firenow){return;}
this.isRunning=true;this.queue[this.index++]();if(this.index<this.queue.length){setTimeout(function(){run(true);},$.imageloader.queueInterval);}
else{this.isRunning=false;}};$.imageloader={queueInterval:17};$.fn.imageloader=function(opts){return this.each(function(i,elm){init(i,elm,opts);});};})(jQuery);
