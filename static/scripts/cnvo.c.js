(function($){var $window=$(window);var options={};var zindexvalues=[];var lastclicked=[];var onevisible=false;var oneormorevisible=false;var scrollbarwidth;var focushandler=null;var blurhandler=null;var escapehandler=null;var bodymarginright=null;var opensuffix="_open";var closesuffix="_close";var focusedelementbeforepopup=null;var methods={_init:function(el){var $el=$(el);var options=$el.data("popupoptions");lastclicked[el.id]=false;zindexvalues[el.id]=0;if(!$el.data("popup-initialized")){$el.attr("data-popup-initialized","true");methods._initonce(el)}if(options.autoopen)setTimeout(function(){methods.show(el,0)},0)},_initonce:function(el){var $body=$("body");var $wrapper;var options=$el.data("popupoptions");bodymarginright=parseInt($body.css("margin-right"),10);if(options.type=="tooltip"){options.background=false;options.scrolllock=false}if(options.scrolllock){var parent;var child;if(typeof scrollbarwidth==="undefined"){parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body");child=parent.children();scrollbarwidth=child.innerWidth()-child.height(99).innerWidth();parent.remove()}}if(!$el.attr("id"))$el.attr("id","j-popup-"+parseInt(Math.random()*1E8));$el.addClass("popup_content");$body.prepend(el);$el.wrap('<div id="'+el.id+'_wrapper" class="popup_wrapper" />');$wrapper=$("#"+el.id+"_wrapper");$wrapper.css({opacity:0,visibility:"hidden",position:"absolute",overflow:"auto"});$el.css({opacity:0,visibility:"hidden",display:"inline-block"});if(options.setzindex&&!options.autozindex)$wrapper.css("z-index","2001");if(!options.outline)$el.css("outline","none");if(options.transition){$el.css("transition",options.transition);$wrapper.css("transition",options.transition)}$(el).attr("aria-hidden",true);if(options.background&&!$("#"+el.id+"_background").length){var popupbackground='<div id="'+el.id+'_background" class="popup_background"></div>';$body.prepend(popupbackground);var $background=$("#"+el.id+"_background");$background.css({opacity:0,visibility:"hidden",backgroundColor:options.color,position:"fixed",top:0,right:0,bottom:0,left:0});if(options.setzindex&&!options.autozindex)$background.css("z-index","2000");if(options.transition)$background.css("transition",options.transition)}if(options.type=="overlay"){$el.css({textAlign:"left",position:"relative",verticalAlign:"middle"});$wrapper.css({position:"fixed",top:0,right:0,left:0,bottom:0,textAlign:"center"});$wrapper.append('<div class="popup_align" />');$(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})}$el.attr("role","dialog");var openelement=options.openelement?options.openelement:"."+el.id+opensuffix;$(openelement).each(function(i,item){$(item).attr("data-popup-ordinal",i);if(!$(item).attr("id"))$(item).attr("id","open_"+parseInt(Math.random()*1E8,10))});if(!($el.attr("aria-labelledby")||$el.attr("aria-label")))$el.attr("aria-labelledby",$(openelement).attr("id"));$(document).on("click",openelement,function(e){if(!$el.data("popup-visible")){var ord=$(this).data("popup-ordinal");setTimeout(function(){methods.show(el,ord)},0);e.preventDefault()}});var closeelement=options.closeelement?options.closeelement:"."+el.id+closesuffix;$(document).on("click",closeelement,function(e){methods.hide(el);e.preventDefault()});if(options.detach)$el.hide().detach();else $wrapper.hide()},show:function(el,ordinal){var $el=$(el);if($el.data("popup-visible"))return;if(!$el.data("popup-initialized"))methods._init(el);$el.attr("data-popup-initialized","true");var $body=$("body");var options=$el.data("popupoptions");var $wrapper=$("#"+el.id+"_wrapper");var $background=$("#"+el.id+"_background");callback(el,ordinal,options.beforeopen);lastclicked[el.id]=ordinal;if(options.detach){$wrapper.prepend(el);$el.show()}else $wrapper.show();setTimeout(function(){$wrapper.css({visibility:"visible",opacity:1});$("html").addClass("popup_visible").addClass("popup_visible_"+el.id);$el.addClass("popup_content_visible")},20);$el.css({"visibility":"visible","opacity":1});if(options.scrolllock){$body.css("overflow","hidden");if($body.height()>$window.height())$body.css("margin-right",bodymarginright+scrollbarwidth)}setTimeout(function(){if(!onevisible){if(options.keepfocus)$(document).on("focusin",focushandler);if(options.blur)$(document).on("click",blurhandler);if(options.escape)$(document).on("keydown",escapehandler)}if(!onevisible)onevisible=true;else oneormorevisible=true},0);$el.data("popup-visible",true);methods.reposition(el,ordinal);if(options.background){$background.css({"visibility":"visible","opacity":options.opacity});setTimeout(function(){$background.css({"opacity":options.opacity})},0)}focusedelementbeforepopup=document.activeElement;if(options.keepfocus){$el.attr("tabindex",-1);setTimeout(function(){if(options.focuselement)$(options.focuselement).focus();else $el.focus()},options.focusdelay);focushandler=function(event){var dialog=document.getElementById(el.id);if(!dialog.contains(event.target)){event.stopPropagation();dialog.focus()}}}if(options.autozindex){var elements=document.getElementsByTagName("*");var len=elements.length;var maxzindex=0;for(var i=0;i<len;i++){var elementzindex=$(elements[i]).css("z-index");if(elementzindex!=="auto"){elementzindex=parseInt(elementzindex);if(maxzindex<elementzindex)maxzindex=elementzindex}}zindexvalues[el.id]=maxzindex;if(zindexvalues[el.id]>0)$wrapper.css({zIndex:zindexvalues[el.id]+2});if(options.background)if(zindexvalues[el.id]>0)$("#"+el.id+"_background").css({zIndex:zindexvalues[el.id]+1})}if(options.blur)blurhandler=function(e){if(!$(e.target).parents().andSelf().is("#"+el.id))methods.hide(el)};if(options.escape)escapehandler=function(e){if(e.keyCode==27&&$el.data("popup-visible"))methods.hide(el)};$(options.pagecontainer).attr("aria-hidden",true);$el.attr("aria-hidden",false);$wrapper.one("transitionend",function(){callback(el,ordinal,options.opentransitionend)});callback(el,ordinal,options.onopen)},hide:function(el){var $body=$("body");var $el=$(el);var options=$el.data("popupoptions");var $wrapper=$("#"+el.id+"_wrapper");var $background=$("#"+el.id+"_background");$el.data("popup-visible",false);if(oneormorevisible){$("html").removeClass("popup_visible_"+el.id);oneormorevisible=false}else{$("html").removeClass("popup_visible").removeClass("popup_visible_"+el.id);onevisible=false}$el.removeClass("popup_content_visible");if(options.scrolllock)setTimeout(function(){$body.css({overflow:"visible","margin-right":bodymarginright})},10);if(options.blur)$(document).off("click",blurhandler);if(options.keepfocus){$(document).off("focusin",focushandler);setTimeout(function(){if($(focusedelementbeforepopup).is(":visible"))focusedelementbeforepopup.focus()},0)}if(options.escape)$(document).off("keydown",escapehandler);$wrapper.css({"visibility":"hidden","opacity":0});$el.css({"visibility":"hidden","opacity":0});if(options.background)$background.css({"visibility":"hidden","opacity":0});$el.one("transitionend",function(e){if(!$el.data("popup-visible"))if(options.detach)$el.hide().detach();else $wrapper.hide();if(!options.notransitiondetach)callback(el,lastclicked[el.id],options.closetransitionend)});if(options.notransitiondetach)if(options.detach)$el.hide().detach();else $wrapper.hide();$(options.pagecontainer).attr("aria-hidden",false);$el.attr("aria-hidden",true);callback(el,lastclicked[el.id],options.onclose)},toggle:function(el,ordinal){if($el.data("popup-visible"))methods.hide(el);else setTimeout(function(){methods.show(el,ordinal)},0)},reposition:function(el,ordinal){var $el=$(el);var options=$el.data("popupoptions");var $wrapper=$("#"+el.id+"_wrapper");var $background=$("#"+el.id+"_background");ordinal=ordinal||0;if(options.type=="tooltip"){$wrapper.css({"position":"absolute"});var openelement=options.openelement?options.openelement:"."+el.id+opensuffix;var $elementclicked=$(openelement+'[data-popup-ordinal="'+ordinal+'"]');var linkOffset=$elementclicked.offset();if(options.horizontal=="right")$wrapper.css("left",linkOffset.left+$elementclicked.outerWidth()+options.offsetleft);else if(options.horizontal=="leftedge")$wrapper.css("left",linkOffset.left+$elementclicked.outerWidth()-$elementclicked.outerWidth()+options.offsetleft);else if(options.horizontal=="left")$wrapper.css("right",$(window).width()-linkOffset.left-options.offsetleft);else if(options.horizontal=="rightedge")$wrapper.css("right",$(window).width()-linkOffset.left-$elementclicked.outerWidth()-options.offsetleft);else $wrapper.css("left",linkOffset.left+$elementclicked.outerWidth()/2-$el.outerWidth()/2-parseFloat($el.css("marginLeft"))+options.offsetleft);if(options.vertical=="bottom")$wrapper.css("top",linkOffset.top+$elementclicked.outerHeight()+options.offsettop);else if(options.vertical=="bottomedge")$wrapper.css("top",linkOffset.top+$elementclicked.outerHeight()- $el.outerHeight()+options.offsettop);else if(options.vertical=="top")$wrapper.css("bottom",$(window).height()-linkOffset.top-options.offsettop);else if(options.vertical=="topedge")$wrapper.css("bottom",$(window).height()-linkOffset.top-$el.outerHeight()-options.offsettop);else $wrapper.css("top",linkOffset.top+$elementclicked.outerHeight()/2-$el.outerHeight()/2-parseFloat($el.css("marginTop"))+options.offsettop)}else if(options.type=="overlay"){if(options.horizontal)$wrapper.css("text-align",options.horizontal);else $wrapper.css("text-align","center");if(options.vertical)$el.css("vertical-align",options.vertical);else $el.css("vertical-align","middle")}}};var callback=function(el,ordinal,func){var openelement=options.openelement?options.openelement:"."+el.id+opensuffix;var elementclicked=$(openelement+'[data-popup-ordinal="'+ordinal+'"]');if(typeof func=="function")func(elementclicked)};$.fn.popup=function(customoptions){return this.each(function(){$el=$(this);if(typeof customoptions==="object"){var opt=$.extend({},$.fn.popup.defaults,customoptions);$el.data("popupoptions",opt);options=$el.data("popupoptions");methods._init(this)}else if(typeof customoptions==="string"){if(!$el.data("popupoptions")){$el.data("popupoptions",$.fn.popup.defaults);options=$el.data("popupoptions")}methods[customoptions].call(this,this)}else{if(!$el.data("popupoptions")){$el.data("popupoptions",$.fn.popup.defaults);options=$el.data("popupoptions")}methods._init(this)}})};$.fn.popup.defaults={type:"overlay",autoopen:false,background:true,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:true,blur:true,setzindex:true,autozindex:false,scrolllock:false,keepfocus:true,focuselement:null,focusdelay:50,outline:false,pagecontainer:null,detach:false,openelement:null,closeelement:null,transition:null,notransitiondetach:false,beforeopen:function(){},onclose:function(){},onopen:function(){},opentransitionend:function(){},closetransitionend:function(){}}})(jQuery);$("#standalone").popup({color:"white",opacity:1,transition:"0.3s",scrolllock:true});